digraph template {

	pre_exec -> expect [label="{cmd,cases,answers}"]
	pre_exec -> fatal_error [label="fail"]

	result -> post_exec [label="@default"] 

	post_exec -> commit [label="{outfile}"]
	commit -> processed [label="sucess!"]
  commit -> fatal_error [label="fail"]

	post_exec -> fatal_error [label="fail"]

	expect -> hard_error [label="unknown\n(case)"]
	expect -> hard_error [label="fullbuffer"]

	expect -> soft_error [label="timeout"]

  expect -> match [label="{case}"]
  match -> hard_error [label="unknown\n(answer)"]

	result -> soft_error [label="empty\n{outfile}\n(sync)"] 

	soft_error -> expect [label="retry\n{cmd}"]
	soft_error -> fatal_error [label="retries>3"]
	hard_error -> fatal_error [label="is_a"]

	expect -> result [label="EOF"]
	
	match -> answer [label="skip"]
	match -> answer [label="chr"]
	match -> answer [label="save\n{outfile}"]
	match -> answer [label="<other>"]

	answer -> expect [label="jump\n{cases}"]
  answer -> expect [label="@default"]
  answer -> result[label="finish"]
	
	pre_exec[style=filled,fillcolor=orange,fontcolor=black]
	post_exec[style=filled,fillcolor=orange,fontcolor=black]
	expect[style=filled,fillcolor=blue,fontcolor=white]
	match[style=filled,fillcolor=blue,fontcolor=white]
	answer[style=filled,fillcolor=blue,fontcolor=white]
	result[style=filled,fillcolor=blue,fontcolor=white]
	hard_error[style=filled,fillcolor=red,fontcolor=white]
	soft_error[style=filled,fillcolor=pink,fontcolor=red]
	fatal_error[style=filled,fillcolor=red,fontcolor=white]
	commit[style=filled,fillcolor=orange,fontcolor=black]
	processed[style=filled,fillcolor=green,fontcolor=black]
	
}
